# Kemo TUI Configuration
# Custom tmux configuration for Kubernetes demo sessions

# Set custom prefix key
set-option -g prefix C-k
unbind-key C-b
bind-key C-k send-prefix

# Enable mouse support for easier navigation
set-option -g mouse on

# Improve colors and display
set-option -g default-terminal "screen-256color"
set-option -g status-bg colour235
set-option -g status-fg colour136

# Status bar configuration
set-option -g status-right-length 80
set-option -g status-left-length 40
set-option -g status-left "#[fg=green,bold]#S #[fg=yellow]| "
set-option -g status-right "#[fg=cyan]#{?KEMO_DEMO,Demo: #{KEMO_DEMO}/#{KEMO_VARIANT},} #[fg=yellow]| Ctrl-k ? for help"

# Pane border colors
set-option -g pane-border-style fg=colour238
set-option -g pane-active-border-style fg=colour136

# Window status format
set-window-option -g window-status-format " #I:#W "
set-window-option -g window-status-current-format " #I:#W "
set-window-option -g window-status-current-style bg=colour136,fg=colour235,bold

# Custom key bindings for Kemo demo
bind-key r run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh restart; fi'
bind-key n run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh next-step; fi'
bind-key s run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh k8s-status; fi'
bind-key d run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh k8s-dashboard; fi'
bind-key o run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh logs; fi'
bind-key i run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh describe; fi'
bind-key u run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh open-url; fi'
bind-key ? run-shell 'if [ -f /tmp/kemo-hotkeys-#{session_name}.sh ]; then /tmp/kemo-hotkeys-#{session_name}.sh help; fi'

# Session management
bind-key q confirm-before -p "Quit demo? (y/n)" kill-session

# Pane management (enhanced)
bind-key v split-window -h
bind-key x split-window -v
bind-key c kill-pane

# Demo-specific pane shortcuts
bind-key w split-window -h 'watch kubectl get pods -n ${KEMO_NS:-default}'
bind-key e split-window -v 'kubectl get events -n ${KEMO_NS:-default} --watch'

# Navigation improvements
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Pane resizing
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# Copy mode improvements
bind-key [ copy-mode
bind-key ] paste-buffer

# Reload config
bind-key R source-file ./kemo-tmux.conf \; display-message "Config reloaded!"

# Better defaults
set-option -g history-limit 10000
set-option -g escape-time 10
set-option -g focus-events on

# Visual bell
set-option -g visual-bell on
set-option -g bell-action any